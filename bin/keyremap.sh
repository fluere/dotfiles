#!/bin/sh

# Setup KeyRemap4MacBook
mkdir -p ~/Library/Application\ Support/KeyRemap4MacBook/
ln -s -f $(pwd)/settingfiles/KeyRemap4MacBook/private.xml ~/Library/Application\ Support/KeyRemap4MacBook/private.xml

kr4mb=/Applications/KeyRemap4MacBook.app/Contents/Applications/KeyRemap4MacBook_cli.app/Contents/MacOS/KeyRemap4MacBook_cli
$kr4mb reloadxml
$kr4mb set remap.pclikehomeend_self 1
$kr4mb set ex.remap.pclikehomeend 1
$kr4mb set ex.general.dont_remap_internal 1
$kr4mb set ex.remap.pc_pause2eject 1
$kr4mb set general.dont_remap_internal_self 1
$kr4mb set ex.remap.controlL2commandL 1
$kr4mb set remap.controlR2commandR_self 1
$kr4mb set ex.remap.pclikecontrolarrow_except_vm 1
$kr4mb set general.dont_remap_apple_keyboard 1
$kr4mb set remap.pclikepageupdown_except_emacs_self 1
$kr4mb set ex.remap.pclikepageupdown_except_emacs 1
$kr4mb set remap.commandL2controlL_self 1
$kr4mb set ex.general.dont_remap_apple_keyboard 1
$kr4mb set ex.remap.commandL2controlL 1
$kr4mb set remap.pclikecontrolarrow_except_vm_self 1
$kr4mb set general.dont_remap_apple_keyboard_self 1
$kr4mb set remap.controlL2commandL_self 1
$kr4mb set remap.pclikehomeend 1
$kr4mb set ex.remap.jis_backquote_kana_eisuu 1
$kr4mb set ex.remap.controlR2commandR 1
$kr4mb set general.dont_remap_internal 1
$kr4mb set remap.pclikepageupdown_except_emacs 1
$kr4mb set remap.pclikecontrolarrow_except_vm 1
$kr4mb set remap.pc_pause2eject_self 1

# PCKeyboardHack
pckh=/Applications/PCKeyboardHack.app/Contents/Library/bin/PCKeyboardHack_cli
$pckh set keycode_int8 76
$pckh set keycode_lang6 76
$pckh set enable_capslock 1
$pckh set enable_jis_xfer 1
$pckh set enable_lang1 0
$pckh set enable_control_l 0
$pckh set enable_escape 0
$pckh set keycode_control_l 55
$pckh set keycode_again 111
$pckh set enable_int6 0
$pckh set keycode_int6 76
$pckh set enable_adb_keyboard_power 0
$pckh set keycode_select 111
$pckh set enable_command_l 0
$pckh set keycode_lang5 76
$pckh set enable_shift_l 0
$pckh set enable_undo 0
$pckh set keycode_jis_nfer 102
$pckh set keycode_tab 48
$pckh set enable_int2 0
$pckh set enable_option_l 0
$pckh set keycode_int4 76
$pckh set enable_lang8 0
$pckh set enable_jis_nfer 1
$pckh set keycode_paste 111
$pckh set keycode_lang4 76
$pckh set enable_cut 0
$pckh set keycode_command_r 54
$pckh set enable_int9 0
$pckh set keycode_stop 111
$pckh set keycode_int2 76
$pckh set enable_lang6 0
$pckh set keycode_lang3 76
$pckh set enable_tab 0
$pckh set enable_int5 0
$pckh set enable_paste 0
$pckh set enable_enter 0
$pckh set enable_lang4 0
$pckh set enable_delete 0
$pckh set keycode_find 111
$pckh set keycode_lang2 76
$pckh set enable_execute 0
$pckh set keycode_enter 76
$pckh set enable_menu 0
$pckh set keycode_int9 76
$pckh set keycode_application 160
$pckh set enable_int1 0
$pckh set keycode_jis_kana 104
$pckh set keycode_escape 53
$pckh set enable_lang2 0
$pckh set enable_find 0
$pckh set enable_jis_kana 1
$pckh set keycode_shift_l 56
$pckh set keycode_lang1 76
$pckh set keycode_control_r 54
$pckh set keycode_int7 76
$pckh set enable_int8 0
$pckh set keycode_capslock 55
$pckh set enable_option_r 0
$pckh set enable_application 1
$pckh set enable_int4 0
$pckh set enable_return 0
$pckh set keycode_int5 76
$pckh set enable_lang9 0
$pckh set keycode_cut 111
$pckh set keycode_jis_xfer 104
$pckh set keycode_adb_keyboard_power 127
$pckh set keycode_lang9 76
$pckh set keycode_option_r 61
$pckh set keycode_execute 111
$pckh set keycode_int3 76
$pckh set enable_lang7 0
$pckh set enable_copy 0
$pckh set keycode_command_l 58
$pckh set keycode_lang8 76
$pckh set enable_select 0
$pckh set enable_control_r 0
$pckh set keycode_undo 111
$pckh set enable_int7 0
$pckh set enable_shift_r 0
$pckh set keycode_int1 76
$pckh set enable_lang5 0
$pckh set enable_command_r 0
$pckh set enable_again 0
$pckh set keycode_delete 51
$pckh set keycode_lang7 76
$pckh set keycode_return 36
$pckh set enable_int3 0
$pckh set keycode_shift_r 60
$pckh set keycode_menu 111
$pckh set enable_lang3 0
$pckh set keycode_option_l 58
$pckh set enable_stop 0
$pckh set keycode_copy 111