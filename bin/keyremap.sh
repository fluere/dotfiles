#!/bin/sh

# Setup Karabiner
mkdir -p ~/Library/Application\ Support/Karabiner/
ln -s -f $(pwd)/settingfiles/Karabiner/private.xml ~/Library/Application\ Support/Karabiner/private.xml

karabiner=/Applications/Karabiner.app/Contents/Library/bin/karabiner
$karabiner reloadxml
$karabiner set general.dont_remap_apple_keyboard 1
$karabiner set general.dont_remap_apple_keyboard_self 1
$karabiner set general.dont_remap_internal 1
$karabiner set general.dont_remap_internal_self 1
$karabiner set remap.commandL2controlL_self 1
$karabiner set remap.controlL2commandL_self 1
$karabiner set remap.controlR2commandR_self 1
$karabiner set remap.pc_pause2eject_self 1
$karabiner set remap.pclikecontrolarrow_except_vm 1
$karabiner set remap.pclikecontrolarrow_except_vm_self 1
$karabiner set remap.pclikehomeend 1
$karabiner set remap.pclikehomeend_self 1
$karabiner set remap.pclikepageupdown_except_emacs 1
$karabiner set remap.pclikepageupdown_except_emacs_self 1
$karabiner set ex.general.dont_remap_apple_keyboard 1
$karabiner set ex.general.dont_remap_internal 1
$karabiner set ex.remap.commandL2controlL 1
$karabiner set ex.remap.controlL2commandL 1
$karabiner set ex.remap.controlR2commandR 1
$karabiner set ex.remap.jis_backquote_kana_eisuu 1
$karabiner set ex.remap.pc_pause2eject 1
$karabiner set ex.remap.pclikecontrolarrow_except_vm 1
$karabiner set ex.remap.pclikehomeend 1
$karabiner set ex.remap.pclikepageupdown_except_emacs 1

# Setup Seil
seil=/Applications/Seil.app/Contents/Library/bin/seil
$seil set keycode_int8 76
$seil set enable_adb_keyboard_power 0
$seil set enable_again 0
$seil set enable_application 1
$seil set enable_capslock 1
$seil set enable_command_l 0
$seil set enable_command_r 0
$seil set enable_control_l 0
$seil set enable_control_r 0
$seil set enable_copy 0
$seil set enable_cut 0
$seil set enable_delete 0
$seil set enable_enter 0
$seil set enable_escape 0
$seil set enable_execute 0
$seil set enable_find 0
$seil set enable_int1 0
$seil set enable_int2 0
$seil set enable_int3 0
$seil set enable_int4 0
$seil set enable_int5 0
$seil set enable_int6 0
$seil set enable_int7 0
$seil set enable_int8 0
$seil set enable_int9 0
$seil set enable_jis_kana 1
$seil set enable_jis_nfer 1
$seil set enable_jis_xfer 1
$seil set enable_lang1 0
$seil set enable_lang2 0
$seil set enable_lang3 0
$seil set enable_lang4 0
$seil set enable_lang5 0
$seil set enable_lang6 0
$seil set enable_lang7 0
$seil set enable_lang8 0
$seil set enable_lang9 0
$seil set enable_menu 0
$seil set enable_option_l 0
$seil set enable_option_r 0
$seil set enable_paste 0
$seil set enable_return 0
$seil set enable_select 0
$seil set enable_shift_l 0
$seil set enable_shift_r 0
$seil set enable_space 0
$seil set enable_ssapex_l1 0
$seil set enable_ssapex_l2 0
$seil set enable_ssapex_l3 0
$seil set enable_ssapex_l4 0
$seil set enable_ssapex_upleft 0
$seil set enable_ssapex_upright 0
$seil set enable_stop 0
$seil set enable_tab 0
$seil set enable_undo 0
$seil set keycode_adb_keyboard_power 127
$seil set keycode_again 111
$seil set keycode_application 160
$seil set keycode_capslock 55
$seil set keycode_command_l 58
$seil set keycode_command_r 54
$seil set keycode_control_l 55
$seil set keycode_control_r 54
$seil set keycode_copy 111
$seil set keycode_cut 111
$seil set keycode_delete 51
$seil set keycode_enter 76
$seil set keycode_escape 53
$seil set keycode_execute 111
$seil set keycode_find 111
$seil set keycode_int1 76
$seil set keycode_int2 76
$seil set keycode_int3 76
$seil set keycode_int4 76
$seil set keycode_int5 76
$seil set keycode_int6 76
$seil set keycode_int7 76
$seil set keycode_int9 76
$seil set keycode_jis_kana 104
$seil set keycode_jis_nfer 102
$seil set keycode_jis_xfer 104
$seil set keycode_lang1 76
$seil set keycode_lang2 76
$seil set keycode_lang3 76
$seil set keycode_lang4 76
$seil set keycode_lang5 76
$seil set keycode_lang6 76
$seil set keycode_lang7 76
$seil set keycode_lang8 76
$seil set keycode_lang9 76
$seil set keycode_menu 111
$seil set keycode_option_l 58
$seil set keycode_option_r 61
$seil set keycode_paste 111
$seil set keycode_return 36
$seil set keycode_select 111
$seil set keycode_shift_l 56
$seil set keycode_shift_r 60
$seil set keycode_space 49
$seil set keycode_ssapex_l1 111
$seil set keycode_ssapex_l2 111
$seil set keycode_ssapex_l3 111
$seil set keycode_ssapex_l4 111
$seil set keycode_ssapex_upleft 111
$seil set keycode_ssapex_upright 111
$seil set keycode_stop 111
$seil set keycode_tab 48
$seil set keycode_undo 111